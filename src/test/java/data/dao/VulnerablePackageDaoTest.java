package data.dao;

import data.po.VulnerablePackage;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;
import utiil.MybatisUtil;

import java.util.HashSet;
import java.util.Objects;
import java.util.Set;

import static org.junit.Assert.*;

public class VulnerablePackageDaoTest {
    @Test(timeout = 4000)
    public void getMavenInfo() {
        SqlSession sqlSession = MybatisUtil.createSqlSession();
        VulnerablePackageDao vulnerablePackageDao = sqlSession.getMapper(VulnerablePackageDao.class);
        Set<VulnerablePackage> vulnerablePackageSet = vulnerablePackageDao.selectAllDistinctVulnerablePackage();
        for (VulnerablePackage vulnerablePackage : vulnerablePackageSet) {
            System.out.println(vulnerablePackage.toStringToFile());
        }
    }

    @Test(timeout = 4000)
    public void testEquals() {
        VulnerablePackage vulnerablePackage = new VulnerablePackage("xmu", "detect", "");
        VulnerablePackage vulnerablePackageSame = new VulnerablePackage("xmu", "detect", "aba");
        VulnerablePackage vulnerablePackageNoSame = new VulnerablePackage("neu", "repair", "");
        assertEquals(vulnerablePackage, vulnerablePackageSame);
        assertNotEquals(vulnerablePackage, vulnerablePackageNoSame);
        HashSet<VulnerablePackage> origin = new HashSet<>();
        origin.add(vulnerablePackage);
        assertTrue(origin.contains(vulnerablePackageSame));
        assertFalse(origin.contains(vulnerablePackageNoSame));
    }
}
