package data.dao;

import data.po.MavenDependency;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;
import utiil.MybatisUtil;

import java.util.HashSet;
import java.util.Set;

import static org.junit.Assert.*;

public class MavenDependencyDaoTest {
    @Test(timeout = 4000)
    public void getMavenInfo() {
        SqlSession sqlSession = MybatisUtil.createSqlSession();
        MavenDependencyDao mavenDependencyDao = sqlSession.getMapper(MavenDependencyDao.class);
        Set<MavenDependency> mavenDependencies = mavenDependencyDao.selectAllDistinctMavenDependency();
        for (MavenDependency mavenDependency : mavenDependencies) {
            System.out.println(mavenDependency.toStringToFile());
        }
    }

    @Test(timeout = 4000)
    public void testEquals() {
        MavenDependency mavenDependency = new MavenDependency("xmu", "detect", "");
        MavenDependency mavenDependencySame = new MavenDependency("xmu", "detect", "");
        MavenDependency mavenDependencyNoSame = new MavenDependency("neu", "repair", "");
        assertEquals(mavenDependency, mavenDependencySame);
        assertNotEquals(mavenDependency, mavenDependencyNoSame);
        HashSet<MavenDependency> origin = new HashSet<>();
        origin.add(mavenDependency);
        assertTrue(origin.contains(mavenDependencySame));
        assertFalse(origin.contains(mavenDependencyNoSame));
    }
}
